{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validateSP = void 0;\n\nfunction calcFirstDigit(ie) {\n  var body = ie.substr(0, 8);\n  var weight = [1, 3, 4, 5, 6, 7, 8, 10];\n  var sum = 0;\n  body.split('').forEach(function (digit, index) {\n    sum += +digit * weight[index];\n  });\n  var dig = sum % 11;\n  var digit = dig.toString();\n  return +digit.substr(digit.length - 1, 1);\n}\n\nfunction calcSecondDigit(ie) {\n  var body = ie.substr(0, 11);\n  var weight = 3;\n  var sum = 0;\n  body.split('').forEach(function (digit) {\n    sum += +digit * weight;\n    weight--;\n\n    if (weight === 1) {\n      weight = 10;\n    }\n  });\n  var dig = sum % 11;\n  var digit = dig.toString();\n  return +digit.substr(digit.length - 1, 1);\n}\n\nfunction validateSP(ie) {\n  var ieStr = String(ie).replace(/\\D/g, '');\n  if (ieStr.length !== 12) return false;\n  var length = ieStr.length;\n  var positionFirstDigit = length - 4;\n  var positionSecondDigit = length - 1;\n  var firstDigit = calcFirstDigit(ieStr);\n  var secondDigit = calcSecondDigit(ieStr);\n  var ieAtFirstPos = +ieStr.charAt(positionFirstDigit);\n  var ieAtSecondPos = +ieStr.charAt(positionSecondDigit);\n  return firstDigit === ieAtFirstPos && secondDigit === ieAtSecondPos;\n}\n\nexports.validateSP = validateSP;","map":{"version":3,"sources":["/home/igor/type-script/node_modules/validations-br/lib/validations/ie/states/sp.js"],"names":["Object","defineProperty","exports","value","validateSP","calcFirstDigit","ie","body","substr","weight","sum","split","forEach","digit","index","dig","toString","length","calcSecondDigit","ieStr","String","replace","positionFirstDigit","positionSecondDigit","firstDigit","secondDigit","ieAtFirstPos","charAt","ieAtSecondPos"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,UAAR,GAAqB,KAAK,CAA1B;;AACA,SAASC,cAAT,CAAwBC,EAAxB,EAA4B;AACxB,MAAIC,IAAI,GAAGD,EAAE,CAACE,MAAH,CAAU,CAAV,EAAa,CAAb,CAAX;AACA,MAAIC,MAAM,GAAG,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,EAAtB,CAAb;AACA,MAAIC,GAAG,GAAG,CAAV;AACAH,EAAAA,IAAI,CAACI,KAAL,CAAW,EAAX,EAAeC,OAAf,CAAuB,UAAUC,KAAV,EAAiBC,KAAjB,EAAwB;AAC3CJ,IAAAA,GAAG,IAAI,CAACG,KAAD,GAASJ,MAAM,CAACK,KAAD,CAAtB;AACH,GAFD;AAGA,MAAIC,GAAG,GAAGL,GAAG,GAAG,EAAhB;AACA,MAAIG,KAAK,GAAGE,GAAG,CAACC,QAAJ,EAAZ;AACA,SAAO,CAACH,KAAK,CAACL,MAAN,CAAaK,KAAK,CAACI,MAAN,GAAe,CAA5B,EAA+B,CAA/B,CAAR;AACH;;AACD,SAASC,eAAT,CAAyBZ,EAAzB,EAA6B;AACzB,MAAIC,IAAI,GAAGD,EAAE,CAACE,MAAH,CAAU,CAAV,EAAa,EAAb,CAAX;AACA,MAAIC,MAAM,GAAG,CAAb;AACA,MAAIC,GAAG,GAAG,CAAV;AACAH,EAAAA,IAAI,CAACI,KAAL,CAAW,EAAX,EAAeC,OAAf,CAAuB,UAAUC,KAAV,EAAiB;AACpCH,IAAAA,GAAG,IAAI,CAACG,KAAD,GAASJ,MAAhB;AACAA,IAAAA,MAAM;;AACN,QAAIA,MAAM,KAAK,CAAf,EAAkB;AACdA,MAAAA,MAAM,GAAG,EAAT;AACH;AACJ,GAND;AAOA,MAAIM,GAAG,GAAGL,GAAG,GAAG,EAAhB;AACA,MAAIG,KAAK,GAAGE,GAAG,CAACC,QAAJ,EAAZ;AACA,SAAO,CAACH,KAAK,CAACL,MAAN,CAAaK,KAAK,CAACI,MAAN,GAAe,CAA5B,EAA+B,CAA/B,CAAR;AACH;;AACD,SAASb,UAAT,CAAoBE,EAApB,EAAwB;AACpB,MAAIa,KAAK,GAAGC,MAAM,CAACd,EAAD,CAAN,CAAWe,OAAX,CAAmB,KAAnB,EAA0B,EAA1B,CAAZ;AACA,MAAIF,KAAK,CAACF,MAAN,KAAiB,EAArB,EACI,OAAO,KAAP;AACJ,MAAIA,MAAM,GAAGE,KAAK,CAACF,MAAnB;AACA,MAAIK,kBAAkB,GAAGL,MAAM,GAAG,CAAlC;AACA,MAAIM,mBAAmB,GAAGN,MAAM,GAAG,CAAnC;AACA,MAAIO,UAAU,GAAGnB,cAAc,CAACc,KAAD,CAA/B;AACA,MAAIM,WAAW,GAAGP,eAAe,CAACC,KAAD,CAAjC;AACA,MAAIO,YAAY,GAAG,CAACP,KAAK,CAACQ,MAAN,CAAaL,kBAAb,CAApB;AACA,MAAIM,aAAa,GAAG,CAACT,KAAK,CAACQ,MAAN,CAAaJ,mBAAb,CAArB;AACA,SAAOC,UAAU,KAAKE,YAAf,IAA+BD,WAAW,KAAKG,aAAtD;AACH;;AACD1B,OAAO,CAACE,UAAR,GAAqBA,UAArB","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateSP = void 0;\nfunction calcFirstDigit(ie) {\n    var body = ie.substr(0, 8);\n    var weight = [1, 3, 4, 5, 6, 7, 8, 10];\n    var sum = 0;\n    body.split('').forEach(function (digit, index) {\n        sum += +digit * weight[index];\n    });\n    var dig = sum % 11;\n    var digit = dig.toString();\n    return +digit.substr(digit.length - 1, 1);\n}\nfunction calcSecondDigit(ie) {\n    var body = ie.substr(0, 11);\n    var weight = 3;\n    var sum = 0;\n    body.split('').forEach(function (digit) {\n        sum += +digit * weight;\n        weight--;\n        if (weight === 1) {\n            weight = 10;\n        }\n    });\n    var dig = sum % 11;\n    var digit = dig.toString();\n    return +digit.substr(digit.length - 1, 1);\n}\nfunction validateSP(ie) {\n    var ieStr = String(ie).replace(/\\D/g, '');\n    if (ieStr.length !== 12)\n        return false;\n    var length = ieStr.length;\n    var positionFirstDigit = length - 4;\n    var positionSecondDigit = length - 1;\n    var firstDigit = calcFirstDigit(ieStr);\n    var secondDigit = calcSecondDigit(ieStr);\n    var ieAtFirstPos = +ieStr.charAt(positionFirstDigit);\n    var ieAtSecondPos = +ieStr.charAt(positionSecondDigit);\n    return firstDigit === ieAtFirstPos && secondDigit === ieAtSecondPos;\n}\nexports.validateSP = validateSP;\n"]},"metadata":{},"sourceType":"script"}