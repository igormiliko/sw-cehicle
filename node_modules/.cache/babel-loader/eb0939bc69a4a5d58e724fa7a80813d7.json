{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validateTO = void 0;\n\nfunction calcDigit(ie) {\n  var length = ie.length;\n  var position = length - 1;\n  var weight = length;\n  var body = ie.substr(0, position);\n  var sum = 0;\n  body.split('').forEach(function (digit) {\n    sum += +digit * weight;\n    weight--;\n  });\n  var rest = sum % 11;\n  var dig = 11 - rest;\n\n  if (dig >= 10) {\n    dig = 0;\n  }\n\n  return dig === +ie.charAt(position);\n}\n\nfunction oldStartsWith(ie) {\n  var beginWith = ['01', '02', '03', '99'];\n  var begin = ie.substr(2, 2);\n  return beginWith.indexOf(begin) >= 0;\n}\n\nfunction calcOld(ie) {\n  return calcDigit(ie);\n}\n\nfunction checkOld(ie) {\n  var body = ie.slice(0, 2) + ie.slice(4);\n  return oldStartsWith(ie) && calcOld(body);\n}\n\nfunction calcNew(ie) {\n  var length = ie.length;\n  var position = length - 1;\n  var weight = 9;\n  var body = ie.substr(0, position);\n  var sum = 0;\n  body.split('').forEach(function (digit) {\n    sum += +digit * weight;\n    weight--;\n  });\n  var rest = sum % 11;\n  var dig = 11 - rest;\n\n  if (rest < 2) {\n    dig = 0;\n  }\n\n  return dig === +ie.charAt(position);\n}\n\nfunction checkNew(ie) {\n  return calcNew(ie);\n}\n\nfunction validateTO(ie) {\n  var ieStr = String(ie).replace(/\\D/g, '');\n  if (![9, 11].includes(ieStr.length)) return false;\n  var oldCheck = checkOld(ieStr);\n  var newCheck = checkNew(ieStr);\n  return oldCheck || newCheck;\n}\n\nexports.validateTO = validateTO;","map":{"version":3,"sources":["/home/igor/type-script/node_modules/validations-br/lib/validations/ie/states/to.js"],"names":["Object","defineProperty","exports","value","validateTO","calcDigit","ie","length","position","weight","body","substr","sum","split","forEach","digit","rest","dig","charAt","oldStartsWith","beginWith","begin","indexOf","calcOld","checkOld","slice","calcNew","checkNew","ieStr","String","replace","includes","oldCheck","newCheck"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateTO = void 0;\nfunction calcDigit(ie) {\n    var length = ie.length;\n    var position = length - 1;\n    var weight = length;\n    var body = ie.substr(0, position);\n    var sum = 0;\n    body.split('').forEach(function (digit) {\n        sum += +digit * weight;\n        weight--;\n    });\n    var rest = sum % 11;\n    var dig = 11 - rest;\n    if (dig >= 10) {\n        dig = 0;\n    }\n    return dig === +ie.charAt(position);\n}\nfunction oldStartsWith(ie) {\n    var beginWith = ['01', '02', '03', '99'];\n    var begin = ie.substr(2, 2);\n    return beginWith.indexOf(begin) >= 0;\n}\nfunction calcOld(ie) {\n    return calcDigit(ie);\n}\nfunction checkOld(ie) {\n    var body = ie.slice(0, 2) + ie.slice(4);\n    return oldStartsWith(ie) && calcOld(body);\n}\nfunction calcNew(ie) {\n    var length = ie.length;\n    var position = length - 1;\n    var weight = 9;\n    var body = ie.substr(0, position);\n    var sum = 0;\n    body.split('').forEach(function (digit) {\n        sum += +digit * weight;\n        weight--;\n    });\n    var rest = sum % 11;\n    var dig = 11 - rest;\n    if (rest < 2) {\n        dig = 0;\n    }\n    return dig === +ie.charAt(position);\n}\nfunction checkNew(ie) {\n    return calcNew(ie);\n}\nfunction validateTO(ie) {\n    var ieStr = String(ie).replace(/\\D/g, '');\n    if (![9, 11].includes(ieStr.length))\n        return false;\n    var oldCheck = checkOld(ieStr);\n    var newCheck = checkNew(ieStr);\n    return oldCheck || newCheck;\n}\nexports.validateTO = validateTO;\n"]},"metadata":{},"sourceType":"script"}