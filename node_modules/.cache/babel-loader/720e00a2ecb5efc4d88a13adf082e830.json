{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validateBA = void 0;\n\nfunction getModule(ie) {\n  var pos = 0;\n\n  if (ie.length === 9) {\n    pos = 1;\n  }\n\n  var charAt = +ie.substr(pos, 1);\n  var arr = [0, 1, 2, 3, 4, 5, 8];\n\n  if (arr.indexOf(charAt) >= 0) {\n    return 10;\n  }\n\n  return 11;\n}\n\nfunction calcDigit(body, mod) {\n  var weight = body.length + 1;\n  var sum = 0;\n  body.split('').forEach(function (digit) {\n    sum += +digit * weight;\n    weight--;\n  });\n  var rest = sum % mod;\n  var dig = mod - rest;\n\n  if (dig >= 10) {\n    dig = 0;\n  }\n\n  return dig;\n}\n\nfunction validateBA(ie) {\n  var ieStr = String(ie).replace(/\\D/g, '');\n  var length = ieStr.length;\n  if (![8, 9].includes(length)) return false;\n  var body = ieStr.substr(0, length - 2);\n  var mod = getModule(ieStr);\n  var secondDig = calcDigit(body, mod);\n  var firstDig = calcDigit(body + secondDig, mod);\n  var posSecondDig = length - 1;\n  var posFirstDig = length - 2;\n  var ieAtFirstPos = +ieStr.charAt(posFirstDig);\n  var ieAtSecondPos = +ieStr.charAt(posSecondDig);\n  return ieAtFirstPos === firstDig && ieAtSecondPos === secondDig;\n}\n\nexports.validateBA = validateBA;","map":{"version":3,"sources":["/home/igor/type-script/node_modules/validations-br/lib/validations/ie/states/ba.js"],"names":["Object","defineProperty","exports","value","validateBA","getModule","ie","pos","length","charAt","substr","arr","indexOf","calcDigit","body","mod","weight","sum","split","forEach","digit","rest","dig","ieStr","String","replace","includes","secondDig","firstDig","posSecondDig","posFirstDig","ieAtFirstPos","ieAtSecondPos"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,UAAR,GAAqB,KAAK,CAA1B;;AACA,SAASC,SAAT,CAAmBC,EAAnB,EAAuB;AACnB,MAAIC,GAAG,GAAG,CAAV;;AACA,MAAID,EAAE,CAACE,MAAH,KAAc,CAAlB,EAAqB;AACjBD,IAAAA,GAAG,GAAG,CAAN;AACH;;AACD,MAAIE,MAAM,GAAG,CAACH,EAAE,CAACI,MAAH,CAAUH,GAAV,EAAe,CAAf,CAAd;AACA,MAAII,GAAG,GAAG,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAV;;AACA,MAAIA,GAAG,CAACC,OAAJ,CAAYH,MAAZ,KAAuB,CAA3B,EAA8B;AAC1B,WAAO,EAAP;AACH;;AACD,SAAO,EAAP;AACH;;AACD,SAASI,SAAT,CAAmBC,IAAnB,EAAyBC,GAAzB,EAA8B;AAC1B,MAAIC,MAAM,GAAGF,IAAI,CAACN,MAAL,GAAc,CAA3B;AACA,MAAIS,GAAG,GAAG,CAAV;AACAH,EAAAA,IAAI,CAACI,KAAL,CAAW,EAAX,EAAeC,OAAf,CAAuB,UAAUC,KAAV,EAAiB;AACpCH,IAAAA,GAAG,IAAI,CAACG,KAAD,GAASJ,MAAhB;AACAA,IAAAA,MAAM;AACT,GAHD;AAIA,MAAIK,IAAI,GAAGJ,GAAG,GAAGF,GAAjB;AACA,MAAIO,GAAG,GAAGP,GAAG,GAAGM,IAAhB;;AACA,MAAIC,GAAG,IAAI,EAAX,EAAe;AACXA,IAAAA,GAAG,GAAG,CAAN;AACH;;AACD,SAAOA,GAAP;AACH;;AACD,SAASlB,UAAT,CAAoBE,EAApB,EAAwB;AACpB,MAAIiB,KAAK,GAAGC,MAAM,CAAClB,EAAD,CAAN,CAAWmB,OAAX,CAAmB,KAAnB,EAA0B,EAA1B,CAAZ;AACA,MAAIjB,MAAM,GAAGe,KAAK,CAACf,MAAnB;AACA,MAAI,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAOkB,QAAP,CAAgBlB,MAAhB,CAAL,EACI,OAAO,KAAP;AACJ,MAAIM,IAAI,GAAGS,KAAK,CAACb,MAAN,CAAa,CAAb,EAAgBF,MAAM,GAAG,CAAzB,CAAX;AACA,MAAIO,GAAG,GAAGV,SAAS,CAACkB,KAAD,CAAnB;AACA,MAAII,SAAS,GAAGd,SAAS,CAACC,IAAD,EAAOC,GAAP,CAAzB;AACA,MAAIa,QAAQ,GAAGf,SAAS,CAACC,IAAI,GAAGa,SAAR,EAAmBZ,GAAnB,CAAxB;AACA,MAAIc,YAAY,GAAGrB,MAAM,GAAG,CAA5B;AACA,MAAIsB,WAAW,GAAGtB,MAAM,GAAG,CAA3B;AACA,MAAIuB,YAAY,GAAG,CAACR,KAAK,CAACd,MAAN,CAAaqB,WAAb,CAApB;AACA,MAAIE,aAAa,GAAG,CAACT,KAAK,CAACd,MAAN,CAAaoB,YAAb,CAArB;AACA,SAAOE,YAAY,KAAKH,QAAjB,IAA6BI,aAAa,KAAKL,SAAtD;AACH;;AACDzB,OAAO,CAACE,UAAR,GAAqBA,UAArB","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateBA = void 0;\nfunction getModule(ie) {\n    var pos = 0;\n    if (ie.length === 9) {\n        pos = 1;\n    }\n    var charAt = +ie.substr(pos, 1);\n    var arr = [0, 1, 2, 3, 4, 5, 8];\n    if (arr.indexOf(charAt) >= 0) {\n        return 10;\n    }\n    return 11;\n}\nfunction calcDigit(body, mod) {\n    var weight = body.length + 1;\n    var sum = 0;\n    body.split('').forEach(function (digit) {\n        sum += +digit * weight;\n        weight--;\n    });\n    var rest = sum % mod;\n    var dig = mod - rest;\n    if (dig >= 10) {\n        dig = 0;\n    }\n    return dig;\n}\nfunction validateBA(ie) {\n    var ieStr = String(ie).replace(/\\D/g, '');\n    var length = ieStr.length;\n    if (![8, 9].includes(length))\n        return false;\n    var body = ieStr.substr(0, length - 2);\n    var mod = getModule(ieStr);\n    var secondDig = calcDigit(body, mod);\n    var firstDig = calcDigit(body + secondDig, mod);\n    var posSecondDig = length - 1;\n    var posFirstDig = length - 2;\n    var ieAtFirstPos = +ieStr.charAt(posFirstDig);\n    var ieAtSecondPos = +ieStr.charAt(posSecondDig);\n    return ieAtFirstPos === firstDig && ieAtSecondPos === secondDig;\n}\nexports.validateBA = validateBA;\n"]},"metadata":{},"sourceType":"script"}