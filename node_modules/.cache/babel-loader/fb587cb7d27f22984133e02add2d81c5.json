{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validateMG = void 0;\n\nfunction calcFirstDigit(ie) {\n  var body = ie.slice(0, 3) + 0 + ie.slice(3);\n  var concat = '';\n  body.split('').forEach(function (item, index) {\n    var weight = (index + 3) % 2 === 0 ? 2 : 1;\n    concat += +item * weight;\n  });\n  var sum = 0;\n  concat.split('').forEach(function (item) {\n    sum += +item;\n  });\n  var sumString = sum.toString();\n  var length = sumString.length;\n  var lastChar = sumString.substr(length - 1, 1);\n  var lastCharInt = +lastChar;\n  return lastCharInt === 0 ? 0 : 10 - lastCharInt;\n}\n\nfunction calcSecondDigit(body) {\n  var weight = 3;\n  var sum = 0;\n  body.split('').forEach(function (item) {\n    sum += +item * weight;\n    weight--;\n\n    if (weight === 1) {\n      weight = 11;\n    }\n  });\n  var rest = sum % 11;\n  var digit = 11 - rest;\n\n  if (digit >= 10) {\n    digit = 0;\n  }\n\n  return digit;\n}\n\nfunction validateMG(ie) {\n  var ieStr = String(ie).replace(/\\D/g, '');\n  var length = ieStr.length;\n  if (length !== 13) return false;\n  var posFirstDigit = length - 2;\n  var posSecondDigit = length - 1;\n  var body = ieStr.substring(0, 11);\n  var firstDigit = calcFirstDigit(body);\n  var secondDigit = calcSecondDigit(body + firstDigit);\n  var digitAtFirstDigit = +ieStr.charAt(posFirstDigit);\n  var digitAtSecondDigit = +ieStr.charAt(posSecondDigit);\n  return firstDigit === digitAtFirstDigit && secondDigit === digitAtSecondDigit;\n}\n\nexports.validateMG = validateMG;","map":{"version":3,"sources":["/home/igor/Desktop/sw-cehicle/node_modules/validations-br/lib/validations/ie/states/mg.js"],"names":["Object","defineProperty","exports","value","validateMG","calcFirstDigit","ie","body","slice","concat","split","forEach","item","index","weight","sum","sumString","toString","length","lastChar","substr","lastCharInt","calcSecondDigit","rest","digit","ieStr","String","replace","posFirstDigit","posSecondDigit","substring","firstDigit","secondDigit","digitAtFirstDigit","charAt","digitAtSecondDigit"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateMG = void 0;\nfunction calcFirstDigit(ie) {\n    var body = ie.slice(0, 3) + 0 + ie.slice(3);\n    var concat = '';\n    body.split('').forEach(function (item, index) {\n        var weight = (index + 3) % 2 === 0 ? 2 : 1;\n        concat += +item * weight;\n    });\n    var sum = 0;\n    concat.split('').forEach(function (item) {\n        sum += +item;\n    });\n    var sumString = sum.toString();\n    var length = sumString.length;\n    var lastChar = sumString.substr(length - 1, 1);\n    var lastCharInt = +lastChar;\n    return lastCharInt === 0 ? 0 : 10 - lastCharInt;\n}\nfunction calcSecondDigit(body) {\n    var weight = 3;\n    var sum = 0;\n    body.split('').forEach(function (item) {\n        sum += +item * weight;\n        weight--;\n        if (weight === 1) {\n            weight = 11;\n        }\n    });\n    var rest = sum % 11;\n    var digit = 11 - rest;\n    if (digit >= 10) {\n        digit = 0;\n    }\n    return digit;\n}\nfunction validateMG(ie) {\n    var ieStr = String(ie).replace(/\\D/g, '');\n    var length = ieStr.length;\n    if (length !== 13)\n        return false;\n    var posFirstDigit = length - 2;\n    var posSecondDigit = length - 1;\n    var body = ieStr.substring(0, 11);\n    var firstDigit = calcFirstDigit(body);\n    var secondDigit = calcSecondDigit(body + firstDigit);\n    var digitAtFirstDigit = +ieStr.charAt(posFirstDigit);\n    var digitAtSecondDigit = +ieStr.charAt(posSecondDigit);\n    return firstDigit === digitAtFirstDigit && secondDigit === digitAtSecondDigit;\n}\nexports.validateMG = validateMG;\n"]},"metadata":{},"sourceType":"script"}